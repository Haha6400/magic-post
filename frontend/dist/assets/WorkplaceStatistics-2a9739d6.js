import{_ as C,o as r,c as b,b as e,t as _,a as h,r as i,f as a,k as p,e as u,h as I,g as d,d as v,u as S,F as O,s as T,v as y,p as M,i as R}from"./index-adea1279.js";const U={name:"chip",props:["title","content","description"]},F={class:"card-container"},P={class:"header"},z={class:"content"},H={class:"description"};function j(s,o,c,g,t,f){return r(),b("div",F,[e("div",P,_(c.title),1),e("div",z,_(c.content),1),e("div",H,"*"+_(c.description),1)])}const A=C(U,[["render",j],["__scopeId","data-v-b87a1b3d"]]);h.defaults.headers.common.authorization=localStorage.getItem("token");const W={components:{StatisticsCard:A,ChipCard},data(){return{branchName:"",userRole:"",allRecieved:0,allSent:0,totalOrders:0,avaiableOrders:0,income:0,options:{labels:["Đơn đến","Đơn đi"],dataLabels:{enabled:!1}},series:[this.allRecieved,this.allSent],loading:!0,dialog:!1,senderName:"",hubList:[],warehouseList:[],start:null,end:null,orderStatus:null,dataList:[],page:1,itemsPerPage:5,search:"",role:"",senderBranch:"",headers:[{align:"center",key:"order_code",title:"Order Code"},{key:"receiverName",title:"Người nhận",align:"center"},{key:"fee",title:"Chi phí",align:"center"},{key:"receiver_fee",title:"Phí người nhận phải trả",align:"center"},{key:"status",title:"Trạng thái đơn hàng",align:"center"},{title:"Chi tiết",sortable:!1,align:"center",text:"Chi tiết",value:"action"}]}},async created(){if(console.log(this.$route.params.id),localStorage.getItem("userData")){let t=localStorage.getItem("userData"),f=JSON.parse(t);this.userRole=f.account.role}let s="";s="http://localhost:3000/api/workplace/"+this.$route.params.id,await h.get(s).then(t=>{console.log(t.data),this.branchName=t.data}).catch(t=>{console.log(t)});const o=new Date,c=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),g=o.getFullYear()+"-"+(o.getMonth()+1)+"-01";s="http://localhost:3000/api/dashboard/income/"+this.$route.params.id,await h.post(s,{currentDate:c}).then(t=>{console.log(t.data),this.income=t.data}).catch(t=>{console.log(t)}),s="http://localhost:3000/api/dashboard/all/receive/supervisor",await h.post(s,{start:g,end:c,name:this.branchName}).then(t=>{console.log(t.data),this.allRecieved=t.data.count}).catch(t=>{console.log(t)}),s="http://localhost:3000/api/dashboard/all/send/supervisor",await h.post(s,{start:g,end:c,name:this.branchName}).then(t=>{console.log(t.data),this.allSent=t.data.count}).catch(t=>{console.log(t)}),this.totalOrders=this.allRecieved+this.allSent,s="http://localhost:3000/api/orders/all",await h.get(s).then(t=>{console.log(t.data),this.dataList=t.data,this.loading=!1}).catch(t=>{console.log(t),toast.error("???",{position:toast.POSITION.BOTTOM_RIGHT})})}},l=s=>(M("data-v-c482f1f8"),s=s(),R(),s),Y={class:"container"},E={class:"banner"},G={class:"card"},J=l(()=>e("div",{class:"content-header"},"Thống kê trạng thái",-1)),K={class:"banner"},X={class:"table-card"},q={class:"table-container"},Q={class:"title"},Z={class:"buttonList"},$=l(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"})],-1)),tt={class:"loading"},et=["onClick"],ot=l(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.2",stroke:"black",class:"w-6 h-6 icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1)),nt=[ot],st=l(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.2",stroke:"black",class:"w-6 h-6 icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})],-1)),at={class:"text-center pt-2"},lt=l(()=>e("div",{class:"popupHeader"},"Bộ lọc",-1)),it={class:"input-container"},rt=l(()=>e("label",{for:"inputState"},"Trạng thái",-1)),ct=l(()=>e("option",null,"Còn trong kho",-1)),dt=[ct],ht={class:"input-container"},pt=l(()=>e("label",{for:"inputState"},"Nơi gửi",-1)),ut={class:"input-container"},_t=l(()=>e("label",{for:"startDate"},"Ngày bắt đầu",-1)),gt={class:"input-container"},mt=l(()=>e("label",{for:"startDate"},"Ngày kết thúc",-1)),vt={class:"bottomButton"};function bt(s,o,c,g,t,f){const k=i("StatisticsCard"),N=i("apexchart"),m=i("ChipCard"),x=i("v-progress-circular"),V=i("router-link"),L=i("v-pagination"),D=i("v-data-table"),w=i("v-card"),B=i("v-dialog");return r(),b("div",Y,[e("div",E,[a(k,{class:"card",title:"Doanh thu",content:t.income,description:"Số liệu thống kê theo tháng"},null,8,["content"]),a(k,{class:"card",title:"Tổng số đơn hàng",content:t.totalOrders,description:"Số liệu thống kê theo tháng"},null,8,["content"]),a(k,{class:"card",title:"Đơn hàng đến",content:t.allRecieved,description:"Số liệu thống kê theo tháng"},null,8,["content"]),e("div",G,[J,a(N,{width:"270",type:"donut",options:t.options,series:[this.allRecieved,this.allSent]},null,8,["options","series"])])]),e("div",K,[e("div",X,[e("div",q,[e("div",Q,"Chi nhánh "+_(t.branchName),1),e("div",Z,[t.orderStatus?(r(),p(m,{key:0,title:"Trạng thái",content:t.orderStatus},null,8,["content"])):u("",!0),t.senderName?(r(),p(m,{key:1,title:"Đến từ",content:t.senderName},null,8,["content"])):u("",!0),t.start?(r(),p(m,{key:2,title:"Bắt đầu",content:t.start},null,8,["content"])):u("",!0),t.end?(r(),p(m,{key:3,title:"Kết thúc",content:t.end},null,8,["content"])):u("",!0),e("button",{class:"signup",type:"button",onClick:o[0]||(o[0]=n=>t.dialog=!0)},[I(" Bộ lọc "),$])]),e("div",tt,[t.loading?(r(),p(x,{key:0,color:"#ffa500","align-items":"center",indeterminate:"",size:34})):u("",!0)]),a(w,{flat:"",title:""},{default:d(()=>[a(D,{page:t.page,"onUpdate:page":o[2]||(o[2]=n=>t.page=n),headers:t.headers,"items-per-page":t.itemsPerPage,items:t.dataList,search:t.search},{"item.action":d(({item:n})=>[e("button",{onClick:ft=>s.deleteOrder(n.order_code)},nt,8,et),e("button",null,[a(V,{to:{name:"orderDetailbyHubStaff",params:{id:n.order_code}}},{default:d(()=>[st]),_:2},1032,["to"])])]),bottom:d(()=>[e("div",at,[a(L,{modelValue:t.page,"onUpdate:modelValue":o[1]||(o[1]=n=>t.page=n),length:s.pageCount},null,8,["modelValue","length"])])]),_:1},8,["page","headers","items-per-page","items","search"])]),_:1}),a(B,{modelValue:t.dialog,"onUpdate:modelValue":o[10]||(o[10]=n=>t.dialog=n),persistent:"",width:"1024"},{default:d(()=>[a(w,null,{default:d(()=>[lt,e("div",it,[rt,v(e("select",{id:"inputState",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=n=>t.orderStatus=n)},dt,512),[[S,t.orderStatus]])]),e("div",ht,[pt,v(e("select",{id:"inputState",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=n=>t.senderName=n)},[(r(!0),b(O,null,T(t.warehouseList,n=>(r(),b("option",null,_(n),1))),256))],512),[[S,t.senderName]])]),e("div",ut,[_t,v(e("input",{id:"startDate",class:"form-control",type:"date","onUpdate:modelValue":o[5]||(o[5]=n=>t.start=n)},null,512),[[y,t.start]])]),e("div",gt,[mt,v(e("input",{id:"startDate",class:"form-control",type:"date","onUpdate:modelValue":o[6]||(o[6]=n=>t.end=n)},null,512),[[y,t.end]])]),e("div",vt,[e("button",{onClick:[o[7]||(o[7]=n=>t.dialog=!1),o[8]||(o[8]=n=>s.getListFiltered())],class:"btn btn--green-1",style:{width:"fit-content"}}," Đóng "),e("button",{onClick:o[9]||(o[9]=n=>s.deleterFilter()),class:"btn btn--green-1",style:{width:"fit-content"}}," Xóa bộ lọc ")])]),_:1})]),_:1},8,["modelValue"])])])])])}const wt=C(W,[["render",bt],["__scopeId","data-v-c482f1f8"]]);export{wt as default};
